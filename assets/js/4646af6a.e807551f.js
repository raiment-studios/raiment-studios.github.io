"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9041],{5543:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>a,toc:()=>d});var s=n(4848),i=n(8453),o=n(5479);const l={},r="Voxel Instances",a={id:"snowfall/roadmap/prds/voxel-instances",title:"Voxel Instances",description:"Objective",source:"@site/docs/snowfall/150-roadmap/500-prds/voxel-instances.mdx",sourceDirName:"snowfall/150-roadmap/500-prds",slug:"/snowfall/roadmap/prds/voxel-instances",permalink:"/docs/snowfall/roadmap/prds/voxel-instances",draft:!1,unlisted:!1,editUrl:"https://github.com/raiment-studios/monorepo/tree/main/projects/raiment-studios/web2/docs/snowfall/150-roadmap/500-prds/voxel-instances.mdx",tags:[],version:"current",frontMatter:{},sidebar:"snowfallSidebar",previous:{title:"rain-card",permalink:"/docs/snowfall/roadmap/prds/rain-card"},next:{title:"Concept art",permalink:"/docs/snowfall/content/concept-art/"}},c={},d=[{value:"Objective",id:"objective",level:2},{value:"Motivation",id:"motivation",level:4},{value:"Goal",id:"goal",level:4},{value:"Definition",id:"definition",level:3},{value:"Requirements",id:"requirements",level:4},{value:"Out of scope",id:"out-of-scope",level:4},{value:"Success",id:"success",level:3},{value:"Tasks",id:"tasks",level:2},{value:"Planning",id:"planning",level:2},{value:"Risks &amp; mitigations",id:"risks--mitigations",level:3},{value:"Implications",id:"implications",level:3},{value:"Log",id:"log",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"voxel-instances",children:"Voxel Instances"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-prd-labels",children:"status| draft\nmilestone| future\ncategory| experiment\n"})}),"\n",(0,s.jsx)(t.h2,{id:"objective",children:"Objective"}),"\n",(0,s.jsx)(t.h4,{id:"motivation",children:"Motivation"}),"\n",(0,s.jsx)(t.p,{children:"Text performance impact of an experiment using point instancing as a rendering technique."}),"\n",(0,s.jsx)(t.h4,{id:"goal",children:"Goal"}),"\n",(0,s.jsxs)(t.p,{children:["Send voxel chunks as a instance buffer of points (",(0,s.jsx)(t.a,{href:"/blog/2024/09/01/index",children:"see this"}),"), one for each filled voxel. Use instancing to create a ",(0,s.jsx)(t.a,{href:"https://stackoverflow.com/questions/28375338/cube-using-single-gl-triangle-strip",children:"triangle strip"})," from each point for the cube. Measure the performance."]}),"\n",(0,s.jsx)(t.h3,{id:"definition",children:"Definition"}),"\n",(0,s.jsx)(t.h4,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsx)(t.h4,{id:"out-of-scope",children:"Out of scope"}),"\n",(0,s.jsx)(t.h3,{id:"success",children:"Success"}),"\n",(0,s.jsx)(t.p,{children:"Any of..."}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Is faster"}),"\n",(0,s.jsx)(t.li,{children:"Leads to simpler code"}),"\n",(0,s.jsx)(t.li,{children:"Make updating voxel chunks easier"}),"\n",(0,s.jsx)(t.li,{children:"Learn something interesting"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"tasks",children:"Tasks"}),"\n",(0,s.jsx)(t.h2,{id:"planning",children:"Planning"}),"\n",(0,s.jsx)(t.h3,{id:"risks--mitigations",children:"Risks & mitigations"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-prd-risks",children:"Risk: Low\n    Added complexity\nMitigation:\n    Keep the implementation simple\n\nRisk: Low\n    Unneeded if we move to a GPU raytracing-based solution\nMitigation:\n    Only pursue this is it (a) stays simple & independent and (b) seems\n    useful as a learning exercise.\n"})}),"\n",(0,s.jsx)(t.h3,{id:"implications",children:"Implications"}),"\n",(0,s.jsx)(t.h2,{id:"log",children:"Log"}),"\n",(0,s.jsx)(o.B,{})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},5479:(e,t,n)=>{n.d(t,{B:()=>a});var s=n(6540),i=n(961),o=n(6027),l=n(6198),r=n(4848);function a(){const[e,t]=s.useState(null);return s.useEffect((()=>{const e=()=>{const n=document.querySelectorAll('[class*="language-prd-"]');if(!n.length)return console.log("none"),setTimeout(e,100+100*Math.random());const s=[];for(let e=0;e<n.length;e++){const t=n[e],i=t.innerText;let o="";t.className.split(/\s+/).forEach((e=>{let t;if(t=e.match(/^language-prd-(.*)/)){let e=t[1];console.log(e),o=e}})),o&&(t.className="",t.style="",t.innerHTML="",s.push({el:t,type:o,value:i}))}t((e=>(e??[]).concat(s)))};setTimeout(e,0)}),[]),e?(0,r.jsxs)(r.Fragment,{children:[e.map(((e,t)=>{let n=e.type,o="labels"===n?(0,r.jsx)(d,{value:e.value}):"tasks"===n?(0,r.jsx)(l.Zf,{value:e.value}):"risks"===n?(0,r.jsx)(c,{value:e.value}):(0,r.jsx)("pre",{style:{background:"rgba(255, 0, 0, 0.25)"},children:e.value});return(0,r.jsx)(s.Fragment,{children:i.createPortal(o,e.el)},t)})),(0,r.jsx)(p,{title:"Motivation",id:"motivation",children:(0,r.jsx)(o.o,{children:'\nOne of the more difficult to write yet most important sections.\n\nThe text of this section should _as concisely as possible_ **inspire** the reader as to \nwhy this work should be done. It should intentionally avoid describing _how_ the work \nwill be done or any of the "implementation details" of the work. It is literally a\n_motivational_ section that leads into the later sections that provide more context on\nhow, trade-offs, etc.\n                '})}),(0,r.jsx)(p,{title:"Goal",id:"goal",children:(0,r.jsx)(o.o,{children:"\nWhat is being done\n                    "})}),(0,r.jsx)(p,{title:"Planning",id:"planning",children:(0,r.jsx)(o.o,{children:'\n\nThe planning section should outline **just enough** of the high-level approach in order to:\n\n1. Give a overview of the scope of the work\n2. Ensure necessary work is not forgotten (e.g. API impact, documentation updates)\n\nIt should **not** give so much detail as to take away the creativity or problem-solving from the implementer.\n\nTiming...\n\n-   This section should be written before the "Tasks" section.\n-   Updates to this section should be limited to changes were the information is no longer accurate\n-   Updates should _not_ include more detail as implementation progresses (this is not intended to be a living architectural document; it is a "throw away" high-level planning document)\n\n                    '})})]}):null}function c(e){let{value:t=""}=e;const n=function(e){const t=[];let n=null;for(let s of e.trim().split("\n")){let e;if(e=s.match(/^Risk:(.+)$/)){let s={severity:e[1].trim(),description:"",mitigation:""};t.push(s),n=e=>{s.description+=e+"\n"}}else(e=s.match(/^(Mitigation:)\s*$/))?n=e=>{t[t.length-1].mitigation+=e+"\n"}:n(s)}return t}(t);return(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Severity"}),(0,r.jsx)("th",{children:"Description"}),(0,r.jsx)("th",{children:"Mitigation"})]})}),(0,r.jsx)("tbody",{children:n.map(((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{color:"#937324",fontWeight:600},children:e.severity}),(0,r.jsx)("td",{style:{fontSize:"90%"},children:e.description}),(0,r.jsx)("td",{style:{fontSize:"90%"},children:e.mitigation})]},t)))})]})}function d(e){let{value:t=""}=e;const n=t.trim().split("\n").map((e=>e.trim())).filter((e=>!!e)),s=n.map((e=>{let[t,n]=e.split("|").map((e=>e.trim()));return{name:t,value:n,color:(s=t,{status:"#FC8",milestone:"#7BE",category:"#c7e6c7"}[s]??"#ccc")};var s}));return(0,r.jsx)(h,{labels:s})}function h(e){let{labels:t}=e;return(0,r.jsx)("div",{style:{margin:"0 0 32px",display:"flex",flexDirection:"row",gap:8,alignItems:"center"},children:t.map(((e,t)=>(0,r.jsx)(u,{label:e},t)))})}function u(e){let{label:t}=e;return(0,r.jsxs)("div",{style:{fontSize:"80%",fontWeight:600,color:"#555",letterSpacing:-.5,backgroundColor:t.color,display:"flex",flexDirection:"row",alignItems:"center",gap:4,padding:0,borderRadius:8,maxHeight:"1.6em"},children:[(0,r.jsx)("div",{style:{padding:"0 0 0 4px"},children:t.name}),(0,r.jsx)("div",{style:{padding:"0 8px 0 4px",backgroundColor:"rgba(255, 255, 255, 0.6)"},children:t.value})]})}function p(e){let{id:t,title:n,children:i}=e;const[o,l]=s.useState(null),[a,c]=s.useState(!1);return s.useEffect((()=>{const e=async()=>{let n=document.getElementById(t);if(n){const e=n.getBoundingClientRect();l({rect:e,top:n.offsetTop,left:n.offsetLeft})}setTimeout(e,1250)};setTimeout(e,250)}),[]),o?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{position:"absolute",left:o.left+o.rect.width-32,top:o.top,cursor:"pointer"},onClick:e=>{e.stopPropagation(),e.preventDefault(),c(!a)},children:(0,r.jsx)("div",{style:{display:"flex",background:"#9bb0f5",color:"#FFF",width:16,height:16,borderRadius:8,justifyContent:"center",alignItems:"center",textAlign:"center",fontFamily:"serif",fontWeight:900,fontSize:14,fontStyle:"italic",opacity:.5},children:(0,r.jsx)("div",{children:"i"})})}),a&&(0,r.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:99},onClick:()=>c(!1)}),a&&(0,r.jsxs)("div",{style:{position:"absolute",left:o.left,width:o.rect.width,top:o.top,backgroundColor:"white",padding:32,borderRadius:16,zIndex:1e3,minHeight:"24rem"},children:[(0,r.jsx)("div",{style:{float:"right",color:"#555",fontSize:"90%",cursor:"pointer"},onClick:()=>c(!1),children:"close"}),n&&(0,r.jsx)("div",{style:{color:"rgb(10, 90, 182)",fontSize:"135%",borderBottom:"solid 1px #CCC",marginBottom:32,fontWeight:600,userSelect:"none"},children:n}),i]})]}):null}},6198:(e,t,n)=>{n.d(t,{Zf:()=>r,_V:()=>p});var s=n(6540),i=n(4848);function o(e,t){void 0===t&&(t={});let n,s={id:Math.floor(1e20*Math.random()).toString(36).substring(0,8).padStart(8,"0")+Math.floor(1e20*Math.random()).toString(36).substring(0,8).padStart(8,"0"),title:"",status:"todo",notes:"",children:[],collapsed:!0,milestone:"",category:"",tags:[]};for((n=e.match(/^\s*x\s+/))&&(s.status="done",e=e.substring(n[0].length)),(n=e.match(/^\s*\[ \]\s+/))&&(s.status="todo",e=e.substring(n[0].length)),(n=e.match(/^\s*\[x\]\s+/))&&(s.status="done",e=e.substring(n[0].length)),((n=e.match(/^\s*\[!\]\s+/))||(n=e.match(/^\s*\[WIP\]\s+/)))&&(s.status=.5,e=e.substring(n[0].length)),(n=e.match(/^\s*\[-?>\]\s+/))&&(s.status="defer",e=e.substring(n[0].length)),(n=e.match(/^\s*DEFER\s+/))&&(s.status="defer",e=e.substring(n[0].length)),(n=e.match(/^\s*WIP\s+/))&&(s.status=.5,e=e.substring(n[0].length)),(n=(e=e.trimStart()).match(/^(>\s+)/))&&(s.collapsed=!0,e=e.substring(n[1].length));n=e.match(/@([^@\s]+)/);)e=e.substring(0,n.index)+e.substring(n.index+n[0].length).trim(),n[1].startsWith("M:")?s.milestone=n[1].substring(2):n[1].startsWith("C:")?s.category=n[1].substring(2):s.tags.push(n[1]);return s.title=e,t.title&&(s.title=t.title),t.status&&(s.status=t.status),t.status&&(s.status=t.status),t.children&&(s.children=t.children),t.notes&&(s.notes=t.notes),s.notes=s.notes.trim().split("\n").map((e=>"."===e.trim()?"":e)).join("\n"),s}function l(e){const t={groups:[{name:"",rows:[]}],categories:[],milestones:[],tasks:[]};let n=[],s=null;const i=e.split("\n");let l=t.groups[t.groups.length-1],r=null;for(let a of i){let e;if(e=a.match(/^[^\s](.+)$/))if(e[0].startsWith("M:")){let t=e[0].substring(2).trim();r=t.length>0?t:null}else{let n=t.groups.find((t=>t.name===e[0].trim()));n||(n={name:e[0].trim(),rows:[]},t.groups.push(n),t.categories.push(e[0].trim())),l=n}else if(e=a.match(/^([\s]+)-(.+)$/)){let t=e[1].length,i=o(e[2]);r&&!i.milestone&&(i.milestone=r);let a=0,c=l.rows;for(;t>n[a];)c=c[c.length-1].children,a++;c.push(i),n[a]=t,s=i}else(e=a.match(/^([\s]+)([^-].+)$/))?s&&(s.notes+="\n"+e[2]):""===a.trim()?s&&(s.notes+="\n"):console.warn(a)}for(let o of t.groups){for(let e of o.rows)e.category||=o.name;t.tasks=t.tasks.concat(o.rows)}for(let o of t.tasks)o.milestone||(o.milestone=""),o.category||(o.category="Miscellaneous"),"done"===o.status&&""===o.milestone&&(o.milestone="Done");return t}function r(e){let{dataID:t,value:n}=e;const[o,r]=s.useState(null),[c,h]=s.useState(null);if(s.useEffect((()=>{if(t){const e=()=>{const n=document.querySelector(`.language-${t}`);if(!n)return void setTimeout(e,60);const s=n.innerText;h(l(s))};e()}else h(l(n))}),[]),!c)return null;const u=function(e,t){const n=e=>{for(let s of e){if(s.id===t)return s;if(s.children.length>0){let e=n(s.children);if(e)return e}}return null};for(let s of e.groups){let e=n(s.rows);if(e)return e}return null}(c,o);return(0,i.jsxs)("div",{children:[(0,i.jsx)("style",{children:"\n                div.my-table-class {\n                    display: flex;\n                    flex-direction: column;\n                    margin: 0;\n                    width: 100%;\n                    border-collapse: collapse;\n\n\n                    .group {\n                        display: flex;\n                        flex-direction: column;\n\n                        >.group-name {\n                            font-weight: normal;\n                            font-size: 75%;\n                            text-transform: uppercase;\n                        }\n                    }\n\n                    .row {\n                        display: flex;\n                        padding: 2px 4px 2px;\n                        margin: 0;\n                        margin-left: 0;\n                        align-items: center;\n\n                        .title {\n                            flex: 2 0 0;\n                        }\n                        .status {\n                            flex: 0 0 1.5rem;\n                        }\n\n\n                    }\n                    .row:hover {\n                        background: #ecedb9 !important;\n\n                        .expand-arrow {\n                            opacity: 1;\n                        }\n                    }\n\n                    .expand-arrow {\n                        font-size: 12px;\n                        opacity: 0.05;\n                        color: #888;\n                        cursor: pointer;\n                        margin-right: 4px;\n                    }\n                }\n            "}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",padding:"16px 16px",borderRadius:8,border:"solid 1px #CCC",margin:"16px 0"},children:[(0,i.jsx)("div",{className:"my-table-class",style:{flex:"2 0 0"},children:(0,i.jsx)(a,{milestones:c.milestones,categories:c.categories,tasks:c.tasks,activeID:o,setActiveID:r})}),(0,i.jsx)("div",{style:{flex:"1 0 0"},children:(0,i.jsx)(d,{item:u})})]})]})}function a(e){let{milestones:t,categories:n,tasks:s,activeID:o,setActiveID:l}=e;const r=e=>e.toLowerCase().replace(/[^a-z0-9]/g,"").trim();for(let i of s){i.milestone||="",t.find((e=>r(e)===r(i.milestone)))||t.push(i.milestone)}return t=[...new Set(t)],t=t.sort(((e,t)=>(()=>{let n=["","Backlog","Done"],s=n.indexOf(e),i=n.indexOf(t);return-1===s?-1===i?e.localeCompare(t):-1:-1===i?1:-1})())),(0,i.jsx)(i.Fragment,{children:t.map(((e,a)=>(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[t.length>1&&(0,i.jsx)("div",{style:{},children:(0,i.jsx)("strong",{children:e.replace(/^[0-9]+\s+/,"")||"Backlog"})}),(()=>{const a=s.filter((t=>r(t.milestone)===r(e)));return 0===a.length?null:(0,i.jsx)("div",{style:{marginLeft:t.length>1?16:0},children:(0,i.jsx)(c,{categories:n,tasks:a,activeID:o,setActiveID:l})})})()]},a)))})}function c(e){let{categories:t,tasks:n,activeID:s,setActiveID:o}=e;const l=e=>e.toLowerCase().replace(/[^a-z0-9]/g,"");for(let i of n){t.find((e=>l(e)===l(i.category)))||t.push(i.category)}return(0,i.jsx)(i.Fragment,{children:t.map(((e,r)=>{let a=n.filter((t=>l(t.category)===l(e)));return a.length>0?(0,i.jsxs)("div",{className:"group",children:[Object.keys(t).length>1&&(0,i.jsx)("div",{className:"group-name",children:e||"Backlog"}),u(a).map(((e,t)=>(0,i.jsx)(h,{options:{showCategory:!1,showMilestone:!1},row:e,activeID:s,setActiveID:o},e.id)))]},r):null}))})}function d(e){let{item:t}=e;const n=(t?.notes??"").split("\n\n").map((e=>e.trim()));return t&&(0,i.jsxs)("div",{style:{fontSize:"85%"},children:[(0,i.jsx)("div",{style:{borderBottom:"solid 1px #CCC",marginBottom:16},children:"Description"}),(0,i.jsx)("div",{style:{lineHeight:1.2},children:n.map(((e,t)=>(0,i.jsx)("div",{style:{marginBottom:8},children:e},t)))})]})}function h(e){let{row:t,activeID:n,setActiveID:o,depth:l=0,options:r={showCategory:!0}}=e;const[a,c]=function(e,t){const[n,i]=s.useState((()=>{try{const n=localStorage.getItem(e);return null!==n?JSON.parse(n):t}catch(n){return console.error("Error loading data from local storage:",n),t}}));return[n,t=>{try{const s=t instanceof Function?t(n):t;i(s),localStorage.setItem(e,JSON.stringify(s))}catch(s){console.error("Error saving data to local storage:",s)}}]}(`v3:${t.title}`,!t.collapsed);r=Object.assign({showCategory:!0,showMilestone:!0},r);let d=t.status;return"todo"===d&&t.children.some((e=>"done"===e.status||"number"==typeof e.status&&e.status>0))&&(d=.5),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"row",style:{color:"defer"===d?"#AAA":"inherit",backgroundColor:t.id===n?"#4d0bc011":"inherit",borderRadius:10,fontSize:100-Math.min(10*l,50)+"%"},onClick:()=>o(t.id),children:[(0,i.jsx)("div",{className:"expand-arrow",style:{opacity:t.children.length>0?.5:.05,transform:a?"rotate(90deg)":"none"},onClick:()=>c(!a),children:"\u25b6"}),(0,i.jsx)("div",{className:"status",children:"done"===d?(0,i.jsx)("div",{style:{width:12,height:12,background:"#06a306",borderRadius:"50%"}}):"number"==typeof d&&d<1?(0,i.jsx)("div",{style:{width:12,height:12,border:"solid 1px #555",borderRadius:"50%",background:"conic-gradient(\n                                    #fff 0% 50%, \n                                    #06a306 50% 100% \n                                  )"}}):"todo"===d?(0,i.jsx)("div",{style:{width:12,height:12,border:"solid 1px #555",borderRadius:"50%"}}):"defer"===d?(0,i.jsx)("div",{style:{fontSize:12},children:"\u2192"}):d}),(0,i.jsx)("div",{className:"title",style:{textDecoration:"defer"===t.status?"line-through":"none",margin:"2px 0 0px",display:"flex",flexDirection:"column"},children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,i.jsx)("div",{style:{lineHeight:1.05},children:t.title}),t.notes?.trim().length>0&&(0,i.jsx)("div",{style:{fontSize:10,filter:"grayscale(100%)",opacity:.75,paddingLeft:4},children:"\ud83d\uddd2"})]})})]}),(0,i.jsxs)("div",{style:{marginLeft:58,fontSize:"70%",lineHeight:1,minHeight:6,opacity:.5,marginTop:-2},children:[r.showMilestone&&t.milestone&&(0,i.jsx)("span",{style:{display:"inline-block",color:"#a51f1f",padding:"0px 2px",margin:"0px 4px 0 0"},children:t.milestone}),r.showCategory&&t.category&&(0,i.jsx)("span",{style:{display:"inline-block",color:"#a56d1f",padding:"0px 2px",margin:"0px 4px 0 0"},children:t.category}),t.tags.length>0&&t.tags.map(((e,t)=>(0,i.jsx)("span",{style:{display:"inline-block",color:"#888",padding:"0px 2px",margin:"0px 4px 0 0"},children:e},t)))]}),t.children.length>0&&a&&(0,i.jsx)("div",{style:{marginLeft:32},children:u(t.children).map(((e,t)=>(0,i.jsx)(h,{row:e,activeID:n,setActiveID:o,depth:l+1,options:r},t)))})]})}function u(e){return e.sort(((e,t)=>{const n=e=>{let t=e.status;return"number"==typeof t?t=Math.max(0,Math.min(1,t)):"string"==typeof t&&(t={todo:0,done:3,defer:4}[t]??t),"number"!=typeof t&&(t=0),0==t&&(t=2),t};return n(e)-n(t)}))}function p(e){let{src:t,brightness:n=1,children:s}=e;return(0,i.jsxs)("div",{style:{textAlign:"center"},children:[(0,i.jsx)("img",{style:{filter:`brightness(${n})`},src:t}),(0,i.jsx)("small",{children:(0,i.jsx)("em",{children:s})})]})}}}]);